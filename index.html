<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>剪映会员 SMS 界面</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        body {
            background-color: #fff;
        }
        /* VIP信息区 */
        .vip-section {
            background-color: #3674ff;
            color: #fff;
            padding: 15px;
        }
        .vip-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .vip-info {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #e0efff;
        }
        /* 公告区 */
        .notice-section {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        .notice-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .notice-icon {
            color: #3674ff;
            margin-right: 8px;
        }
        .notice-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
        .notice-content {
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
        }
        .notice-link {
            font-size: 14px;
            color: #666;
            text-decoration: none;
        }
        /* 手机号区 */
        .phone-section {
            padding: 15px;
        }
        .phone-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .phone-input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .phone-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            color: #333;
            background-color: #f5f5f5;
        }
        .get-btn {
            background-color: #999;
            color: #fff;
            border: none;
            padding: 0 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: not-allowed;
        }
        /* 提示区 */
        .tips-section {
            background-color: #f7f9ff;
            border: 1px solid #e0efff;
            border-radius: 6px;
            padding: 10px;
        }
        .tips-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .tips-icon {
            color: #3674ff;
            margin-right: 8px;
        }
        .tips-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        .tips-list {
            font-size: 13px;
            color: #666;
        }
        .tips-list li {
            margin-bottom: 5px;
        }
        /* 短信验证码区 */
        .sms-section {
            padding: 15px;
        }
        .sms-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .sms-content-area {
            background-color: #f7f9ff;
            border-radius: 6px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 60px;
        }
        .sms-code {
            font-size: 20px;
            font-weight: bold;
            color: #3674ff;
        }
        .copy-btn {
            background-color: #999;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 14px;
            cursor: not-allowed;
        }
        /* 底部导航 */
        .nav-bar {
            background-color: #f5f5f5;
            padding: 10px 0;
            display: flex;
            justify-content: center;
            gap: 40px;
        }
        .nav-btn {
            font-size: 20px;
            color: #666;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- VIP信息区 -->
    <div class="vip-section">
        <div class="vip-title">剪映会员</div>
        <div class="vip-info">
            <span>卡密类型 天卡</span>
            <span id="expireTime">到期时间 </span>
            <span id="remainingTimes">剩余次数 1</span>
        </div>
    </div>

    <!-- 公告区 -->
    <div class="notice-section">
        <div class="notice-header">
            <span class="notice-icon">🔔</span>
            <span class="notice-title">最新公告</span>
        </div>
        <div class="notice-content">剪映登录教程及常见问题</div>
        <a href="https://sourl.cn/CrTARJ" class="notice-link" target="_blank">https://sourl.cn/CrTARJ</a>
    </div>

    <!-- 手机号区（固定为15137969626） -->
    <div class="phone-section">
        <div class="phone-title">手机号码</div>
        <div class="phone-input-area">
            <input type="text" class="phone-input" id="phoneInput" value="15137969626" readonly>
            <button class="get-btn" disabled>号码已固定</button>
        </div>
        <!-- 提示区 -->
        <div class="tips-section">
            <div class="tips-header">
                <span class="tips-icon">ℹ️</span>
                <span class="tips-title">温馨提示</span>
            </div>
            <ul class="tips-list">
                <li>当前手机号：15137969626，点击可复制</li>
                <li>使用该手机号在第三方获取验证码后，系统将自动接收并填充</li>
            </ul>
        </div>
    </div>

    <!-- 短信验证码区（初始为空，端口接收后自动填充） -->
    <div class="sms-section">
        <div class="sms-title">短信验证码</div>
        <div class="sms-content-area">
            <span class="sms-code" id="smsCode">——</span> <!-- 初始为空 -->
            <button class="copy-btn" id="copyBtn">复制验证码</button>
        </div>
    </div>

    <!-- 底部导航 -->
    <div class="nav-bar">
        <span class="nav-btn">＜</span>
        <span class="nav-btn">＞</span>
    </div>

    <script>
        // DOM元素获取
        const expireTimeEl = document.getElementById('expireTime');
        const remainingTimesEl = document.getElementById('remainingTimes');
        const smsCodeEl = document.getElementById('smsCode');
        const copyBtnEl = document.getElementById('copyBtn');
        const phoneInputEl = document.getElementById('phoneInput');

        // 1. 设置动态到期时间（当前时间+1分钟）
        function setExpireTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() + 1);
            const [year, month, day, hour, minute, second] = [
                now.getFullYear(),
                String(now.getMonth() + 1).padStart(2, '0'),
                String(now.getDate()).padStart(2, '0'),
                String(now.getHours()).padStart(2, '0'),
                String(now.getMinutes()).padStart(2, '0'),
                String(now.getSeconds()).padStart(2, '0')
            ];
            expireTimeEl.textContent = `到期时间 ${year}/${month}/${day} ${hour}:${minute}:${second}`;
        }
        setExpireTime();

        // 2. 真实端口接收逻辑（对接你的网站后端，每3秒拉取一次最新验证码）
        function fetchSmsCodeFromPort() {
            // 替换为你的网站后端接口地址（需返回{ code: "6位验证码" }格式）
            const yourBackendApi = "https://你的网站域名/接口路径?phone=15137969626";
            
            fetch(yourBackendApi)
                .then(res => res.json())
                .then(data => {
                    // 接口返回有效验证码时，更新界面
                    if (data.code && /^\d{6}$/.test(data.code)) {
                        smsCodeEl.textContent = data.code;
                        // 启用复制按钮
                        copyBtnEl.style.backgroundColor = '#3674ff';
                        copyBtnEl.style.cursor = 'pointer';
                        // 更新剩余次数为0
                        remainingTimesEl.textContent = '剩余次数 0';
                        // 停止继续拉取（避免重复更新）
                        clearInterval(fetchInterval);
                    }
                })
                .catch(err => console.log('端口拉取验证码失败：', err));
        }

        // 启动端口拉取（每3秒查询一次，直到获取到验证码）
        const fetchInterval = setInterval(fetchSmsCodeFromPort, 3000);

        // 3. 复制验证码功能
        copyBtnEl.addEventListener('click', () => {
            const code = smsCodeEl.textContent;
            if (code === '——') {
                alert('请等待验证码接收');
                return;
            }
            navigator.clipboard.writeText(code).then(() => alert('验证码已复制')).catch(err => alert('复制失败，请手动选择'));
        });

        // 4. 复制手机号功能
        phoneInputEl.addEventListener('click', () => {
            navigator.clipboard.writeText(phoneInputEl.value).then(() => alert('手机号已复制')).catch(err => alert('复制失败'));
        });
    </script>
</body>
</html>